<!DOCTYPE html>
<html lang="en">


<head>
   <title>Run wkTuple</title>
   <script type="text/javascript" src="dependencies/jquery-1.10.2.min.js"> </script>
   <script type="text/javascript" src="dependencies/opencpu-0.4.js"> </script>
  </head>
 <body class="indent">  

 <h2>  Multiple Sequence Free-Alignment (MSFA)</h2> 
   
 Alignment-free methods are based on word-counting, which only considers the frequency of joint neighboring words without any correction of their locations in the sequence and it is of interest to track the position of nucleotides in sequence and
  use the underlying distribution of data. MSFSA is generally the alignment-free of three or more biological sequences (DNA) of similar\different length. The result is a dendrogram that can be used to draw the inference and diagnosis
  the evolutionary relationships between the sequences studied.
      

  <br />
  <br /> 
     <fieldset >
        --------------------------------------------
  <h4>Step I- Uploead the Fasta file</h4>
        
    Save all sequences in a single file fasta and upload it
  <input type="file" id="csvfile">
  <br />

  <button id="submitfile" type="button">Submit file</button> 
  <pre><span2> <code id="outputsubmitfile"></code></span2></pre> 
        --------------------------------------------
</fieldset>
     <br />
         <fieldset >
  <h4>II. Choose the labels </h4> The default labels are numeric values, otherwise the labels should be defined in the following box
  <br />
  <input type="text" id="label1" value=" c('Ape','Baboon','Chimpanzee','Gibbon','Gorilla','Human','Mouse','Rat','SuOrangutan')">
  <br>
  <br> --------------------------------------------
            </fieldset >
  <script>
    function show(elementID) {
      var ele = document.getElementById(elementID);
      if (!ele) {
        alert("no such element");
        return;
      }
      var pages = document.getElementsByClassName('page');
      for (var i = 0; i < pages.length; i++) {
        pages[i].style.display = 'none';
      }
      ele.style.display = 'block';
    }
  </script>

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    
    <fieldset>            
  <h4>III. Select the method  </h4>
    Click here, if you want to view or change the default settings.
       
  <div class="container">

    <div class="dropdown">
      <button class="btn btn-default dropdown-toggle" type="button" id="menu1" data-toggle="dropdown">Select
        <span class="caret"></span></button>
      <ul class="dropdown-menu" role="menu" aria-labelledby="menu1">
        <li role="presentation"><a role="menuitem" tabindex="-1" onclick="show('Page1');">Non-ensample</a></li>
        <li role="presentation"><a role="menuitem" tabindex="-1" onclick="show('Page2');">Ensample</a></li>
      </ul>
    </div>
  </div>

</fieldset>
  <div id="Page1" class="page" style="">
    <span3>*******Non-ensemble is selcted **********</span3>
    <br/> --------------------------------------------

       
    <h4>IV. Choose window length </h4>
    <input type="number" id="nfield" value="2">
    <br />
    <br /> --------------------------------------------
    <h4>V. Run Naive k-tuple </h4>
    <button id="buttondisdfr" type="button">calculate dissimilarity via Naive k-tuple</button>
    <span2>
      <pre><code id="outputdisdfr"></code></pre>
    </span2>
    <br>
    <button id="buttondendisdfr" type="button">Generate Dend.</button>
    <button id="buttondencirdisdfr" type="button">Generate circle Dend.</button>

    <div id="plotdisdfr"></div>
    --------------------------------------------
    <h4>VI. Run CVTRee K-tuple  </h4>
    <button id="buttondiscvtree" type="button">calculate dissimilarity via CVTree</button>
    <span2>
      <pre><code id="outputdiscvtree"></code></pre>
      <br>
    </span2>
    <button id="buttondendiscvtree" type="button">Generate Dend.</button>
    <button id="buttondencirdiscvtree" type="button">Generate circle Dend.</button>
    <div id="plotdiscvtree"></div>
    <br> --------------------------------------------
    <h4>VII. Run Locational k-tuple </h4>
    <button id="buttondislk" type="button">calculate dissimilarity</button>
    <span2>
      <pre><code id="outputdislk"></code></pre>
    </span2>
    <br />

    <button id="buttondendislk" type="button">Generate Dend.</button>
    <button id="buttondencirdislk" type="button">Generate circle Dend.</button>
    <div id="plotdislk"></div>


  </div>
  <div id="Page2" class="page" style="display:none">
    <span3>
      **** Ensemble is selected*****
    </span3>
    <br /> --------------------------------------------
    <h4>IV. Run Regular k-tuple </h4>
    <button id="buttonendisdfr" type="button">calculate dissimilarity via Naive k-tuple</button>
    <span2>
      <pre><code id="outputendisdfr"></code></pre>
    </span2>
    <br>
    <button id="buttonendendisdfr" type="button">Generate Ens Dend.</button>
    <button id="buttonendencirdisdfr" type="button">Generate Ens circle Dend.</button>

    <div id="plotendisdfr"></div>
    --------------------------------------------
    <h4>V. Run CVTRee k-tuple  </h4>
    <button id="buttonendiscvtree" type="button">calculate dissimilarity via CVTree</button>
    <span2>
      <pre><code id="outputendiscvtree"></code></pre>
    </span2>
    <br>
    <button id="buttonendendiscvtree" type="button">Generate Ens. Dend.</button>
    <button id="buttonendencirdiscvtree" type="button">Generate Ens. circle Dend.</button>

    <div id="plotendiscvtree"></div>
    <br> --------------------------------------------
    <h4>VI. Run lktuple </h4>
    <button id="buttonendislk" type="button">calculate Ens. dissimilarity</button>
    <span2>
      <pre><code id="outputendislk"></code></pre>
    </span2>
    <br />

    <button id="buttonendendislk" type="button">Generate Ens. Dend.</button>
    <button id="buttonendencirdislk" type="button">Generate Ens. circle Dend.</button>
    <div id="plotendislk"></div>

  </div>
  <br>
  <p>

    <small>
<span4>
Cite: Amiri, S. and Ivo, D. (2017).  A toolkit for Multiple Free-Alignment Sequence Analysis via R and web-interface.
<br>
    R script: https://sites.google.com/site/saeidamiri1/codes/faktuple
    <br>
Contact: saeid.amiri1 atsign gmail.com
<br>
<br>    
Version: wkTuple0.50
    <br>
License: GPL-3.0    
</span4>
</small>
  </p>

    
    
    <style> 
        fieldset{
    display: flex;
    border: 1px solid;
}
       
        span1 {
  text-decoration: underline;
  color: green;
  cursor: pointer;
  font-weight: bold;
}

span2 {
  text-decoration: underline;
  color: green;
}

span3 {
  text-decoration: underline;
  color: blue;
  font-weight: bold;
  border: 1px solid #000000
}

span4 {
  text-decoration: underline;
  color: gray;
}

#plotdislk {
  height: 400px;
  border: solid gray 1px;
}

#plotdisdfr {
  height: 400px;
  border: solid gray 1px;
}

#plotdiscvtree {
  height: 400px;
  border: solid gray 1px;
}

#plotendislk {
  height: 400px;
  border: solid gray 1px;
}

#plotendisdfr {
  height: 400px;
  border: solid gray 1px;
}

#plotendiscvtree {
  height: 400px;
  border: solid gray 1px;
}

              .indent {
    margin-left: 20px;
}
    </style>
  
  
  
  
  
   <script>
      alert = function() {};
     //because read.csv is in utils
var convertfile;
var matdislk;
var matdisdfr;
var matdiscvtree;
var label0 = new ocpu.Snippet($("#label1").val());
var nfield = parseInt($("#nfield").val());
//actual handler
$("#submitfile").on("click", function() {

  //arguments
  var myheader = $("#header").val() == "true";
  var myfile = $("#csvfile")[0].files[0];

  if (!myfile) {
    alert("No file selected.");
    return;
  }


  //disable the button during upload
  $("#submitfile").attr("disabled", "disabled");

  //perform the request
  ocpu.seturl("//public.opencpu.org/ocpu/library/seqinr/R")
  var req = ocpu.call("read.fasta", {
    "file": myfile,
  }, function(argf) {
    convertfile = argf;
    convertfile.getConsole(function(outtxt) {
      $("#outputsubmitfile").text(outtxt);
    });
  });

  //if R returns an error, alert the error message
  req.fail(function() {
    alert("Server error: " + req.responseText);
  });

  //after request complete, re-enable the button 
  req.always(function() {
    $("#submitfile").removeAttr("disabled")
  });
});

$("#buttondislk").click(function() {
  ocpu.seturl("https://public.opencpu.org/ocpu/github/saeidamiri1/justtest16/R")
  var nfield = parseInt($("#nfield").val());
  var req1 = ocpu.call("DKLlk", {
    ee: convertfile,
    ell: nfield
  }, function(arglk) {
    matdislk = arglk;
    matdislk.getConsole(function(outtxt) {
      $("#outputdislk").text(outtxt);
    });
  });
});

$("#buttondendislk").click(function() {
  ocpu.seturl("https://public.opencpu.org/ocpu/github/saeidamiri1/justtest16/R")
  var req1 = ocpu.call("hc0", {
    Se: matdislk
  }, function(arglkdn) {
    ocpu.seturl("//pubic.opencpu.org/ocpu/library/graphics/R")
    ocpu.seturl("https://public.opencpu.org/ocpu/github/saeidamiri1/justtest16/R")
    var label0 = new ocpu.Snippet($("#label1").val());

    var req = $("#plotdislk").rplot("plotden", {
      hc1: arglkdn,
      cluslab: label0
    })
  });
});


$("#buttondencirdislk").click(function() {
  ocpu.seturl("https://public.opencpu.org/ocpu/github/saeidamiri1/justtest16/R")
  var req1 = ocpu.call("hc0", {
    Se: matdislk
  }, function(arglkcr) {
    ocpu.seturl("//pubic.opencpu.org/ocpu/library/graphics/R")
    ocpu.seturl("//pubic.opencpu.org/ocpu/library/ape/R")
    ocpu.seturl("https://public.opencpu.org/ocpu/github/saeidamiri1/justtest16/R")

    var req = $("#plotdislk").rplot("plotdencir", {
      hc1: arglkcr,
      cluslab: label0
    })
  });
});

/* */
/* */
$("#buttonendislk").click(function() {
  ocpu.seturl("https://public.opencpu.org/ocpu/github/saeidamiri1/justtest16/R")
  var nfield = parseInt($("#nfield").val());
  var req1 = ocpu.call("EnDKLlk", {
    ee: convertfile
  }, function(arglk) {
    matendislk = arglk;
    matendislk.getConsole(function(outtxt) {
      $("#outputendislk").text(outtxt);
    });
  });
});

$("#buttonendendislk").click(function() {
  ocpu.seturl("https://public.opencpu.org/ocpu/github/saeidamiri1/justtest16/R")
  var req1 = ocpu.call("hc0", {
    Se: matendislk
  }, function(arglkdn) {
    ocpu.seturl("//pubic.opencpu.org/ocpu/library/graphics/R")
    ocpu.seturl("https://public.opencpu.org/ocpu/github/saeidamiri1/justtest16/R")
    var label0 = new ocpu.Snippet($("#label1").val());

    var req = $("#plotendislk").rplot("plotden", {
      hc1: arglkdn,
      cluslab: label0
    })
  });
});


$("#buttonendencirdislk").click(function() {
  ocpu.seturl("https://public.opencpu.org/ocpu/github/saeidamiri1/justtest16/R")
  var req1 = ocpu.call("hc0", {
    Se: matendislk
  }, function(arglkcr) {
    ocpu.seturl("//pubic.opencpu.org/ocpu/library/graphics/R")
    ocpu.seturl("//pubic.opencpu.org/ocpu/library/ape/R")
    ocpu.seturl("https://public.opencpu.org/ocpu/github/saeidamiri1/justtest16/R")

    var req = $("#plotendislk").rplot("plotdencir", {
      hc1: arglkcr,
      cluslab: label0
    })
  });
});


/**************************/
/**************************/
/**************************/
/**************************/
/**************************/
/**************************/


$("#buttondisdfr").click(function() {
  ocpu.seturl("https://public.opencpu.org/ocpu/github/saeidamiri1/justtest16/R")
  var nfield = parseInt($("#nfield").val());
  var req1 = ocpu.call("DKLdfr", {
    ee: convertfile,
    ell: nfield
  }, function(argdfr) {
    matdisdfr = argdfr;
    matdisdfr.getConsole(function(outtxt) {
      $("#outputdisdfr").text(outtxt);
    });
  });
});

$("#buttondendisdfr").click(function() {
  ocpu.seturl("https://public.opencpu.org/ocpu/github/saeidamiri1/justtest16/R")
  var req1 = ocpu.call("hc0", {
    Se: matdisdfr
  }, function(argdfrdn) {
    ocpu.seturl("//pubic.opencpu.org/ocpu/library/graphics/R")
    ocpu.seturl("https://public.opencpu.org/ocpu/github/saeidamiri1/justtest16/R")
    var label0 = new ocpu.Snippet($("#label1").val());
    var req = $("#plotdisdfr").rplot("plotden", {
      hc1: argdfrdn,
      cluslab: label0
    })
  });
});

$("#buttondencirdisdfr").click(function() {
  ocpu.seturl("https://public.opencpu.org/ocpu/github/saeidamiri1/justtest16/R")
  var req1 = ocpu.call("hc0", {
    Se: matdisdfr
  }, function(argdfrcr) {
    ocpu.seturl("//pubic.opencpu.org/ocpu/library/graphics/R")
    ocpu.seturl("//pubic.opencpu.org/ocpu/library/ape/R")
    ocpu.seturl("https://public.opencpu.org/ocpu/github/saeidamiri1/justtest16/R")

    var req = $("#plotdisdfr").rplot("plotdencir", {
      hc1: argdfrcr,
      cluslab: label0
    })
  });
});

/**/
/**/
/**/

$("#buttonendisdfr").click(function() {
  ocpu.seturl("https://public.opencpu.org/ocpu/github/saeidamiri1/justtest16/R")
  var nfield = parseInt($("#nfield").val());
  var req1 = ocpu.call("EnDKLdfr", {
    ee: convertfile
  }, function(argdfr) {
    matendisdfr = argdfr;
    matendisdfr.getConsole(function(outtxt) {
      $("#outputendisdfr").text(outtxt);
    });
  });
});

$("#buttonendendisdfr").click(function() {
  ocpu.seturl("https://public.opencpu.org/ocpu/github/saeidamiri1/justtest16/R")
  var req1 = ocpu.call("hc0", {
    Se: matendisdfr
  }, function(argdfrdn) {
    ocpu.seturl("//pubic.opencpu.org/ocpu/library/graphics/R")
    ocpu.seturl("https://public.opencpu.org/ocpu/github/saeidamiri1/justtest16/R")
    var label0 = new ocpu.Snippet($("#label1").val());
    var req = $("#plotendisdfr").rplot("plotden", {
      hc1: argdfrdn,
      cluslab: label0
    })
  });
});

$("#buttonendencirdisdfr").click(function() {
  ocpu.seturl("https://public.opencpu.org/ocpu/github/saeidamiri1/justtest16/R")
  var req1 = ocpu.call("hc0", {
    Se: matendisdfr
  }, function(argdfrcr) {
    ocpu.seturl("//pubic.opencpu.org/ocpu/library/graphics/R")
    ocpu.seturl("//pubic.opencpu.org/ocpu/library/ape/R")
    ocpu.seturl("https://public.opencpu.org/ocpu/github/saeidamiri1/justtest16/R")

    var req = $("#plotendisdfr").rplot("plotdencir", {
      hc1: argdfrcr,
      cluslab: label0
    })
  });
});



/**************************/
/**************************/
/**************************/
/**************************/
/**************************/
/**************************/
$("#buttondiscvtree").click(function() {
  ocpu.seturl("https://public.opencpu.org/ocpu/github/saeidamiri1/justtest16/R")
  var nfield = parseInt($("#nfield").val());
  var req1 = ocpu.call("DKLcvtree", {
    ee: convertfile,
    ell: nfield
  }, function(argcv) {
    matdiscvtree = argcv;
    matdiscvtree.getConsole(function(outtxt) {
      $("#outputdiscvtree").text(outtxt);
    });
  });
});

$("#buttondendiscvtree").click(function() {
  ocpu.seturl("https://public.opencpu.org/ocpu/github/saeidamiri1/justtest16/R")
  var req1 = ocpu.call("hc0", {
    Se: matdiscvtree
  }, function(argcvdn) {
    ocpu.seturl("//pubic.opencpu.org/ocpu/library/graphics/R")
    ocpu.seturl("https://public.opencpu.org/ocpu/github/saeidamiri1/justtest16/R")
    var label0 = new ocpu.Snippet($("#label1").val());
    var req = $("#plotdiscvtree").rplot("plotden", {
      hc1: argcvdn,
      cluslab: label0
    })
  });
});

$("#buttondencirdiscvtree").click(function() {
  ocpu.seturl("https://public.opencpu.org/ocpu/github/saeidamiri1/justtest16/R")
  var req1 = ocpu.call("hc0", {
    Se: matdiscvtree
  }, function(argcvcr) {
    ocpu.seturl("//pubic.opencpu.org/ocpu/library/graphics/R")
    ocpu.seturl("//pubic.opencpu.org/ocpu/library/ape/R")
    ocpu.seturl("https://public.opencpu.org/ocpu/github/saeidamiri1/justtest16/R")
    var req = $("#plotdiscvtree").rplot("plotdencir", {
      hc1: argcvcr,
      cluslab: label0
    })
  });
});

/* */
/* */

$("#buttonendiscvtree").click(function() {
  ocpu.seturl("https://public.opencpu.org/ocpu/github/saeidamiri1/justtest16/R")
  var nfield = parseInt($("#nfield").val());
  var req1 = ocpu.call("EnDKLcvtree", {
    ee: convertfile
  }, function(argcv) {
    matendiscvtree = argcv;
    matendiscvtree.getConsole(function(outtxt) {
      $("#outputendiscvtree").text(outtxt);
    });
  });
});

$("#buttonendendiscvtree").click(function() {
  ocpu.seturl("https://public.opencpu.org/ocpu/github/saeidamiri1/justtest16/R")
  var req1 = ocpu.call("hc0", {
    Se: matendiscvtree
  }, function(argcvdn) {
    ocpu.seturl("//pubic.opencpu.org/ocpu/library/graphics/R")
    ocpu.seturl("https://public.opencpu.org/ocpu/github/saeidamiri1/justtest16/R")
    var label0 = new ocpu.Snippet($("#label1").val());
    var req = $("#plotendiscvtree").rplot("plotden", {
      hc1: argcvdn,
      cluslab: label0
    })
  });
});

$("#buttonendencirdiscvtree").click(function() {
  ocpu.seturl("https://public.opencpu.org/ocpu/github/saeidamiri1/justtest16/R")
  var req1 = ocpu.call("hc0", {
    Se: matendiscvtree
  }, function(argcvcr) {
    ocpu.seturl("//pubic.opencpu.org/ocpu/library/graphics/R")
    ocpu.seturl("//pubic.opencpu.org/ocpu/library/ape/R")
    ocpu.seturl("https://public.opencpu.org/ocpu/github/saeidamiri1/justtest16/R")
    var req = $("#plotendiscvtree").rplot("plotdencir", {
      hc1: argcvcr,
      cluslab: label0
    })
  });
});

 // The program is written by Saeid Amiri.  
  </script>

   </body>
</html>
